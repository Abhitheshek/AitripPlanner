import {GoogleGenerativeAI } from '@google/generative-ai';
  
  const apiKey =import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
  const genAI = new GoogleGenerativeAI(apiKey);
  
  const model = genAI.getGenerativeModel({
    model: "gemini-2.0-flash-exp",
  });
  
  const generationConfig = {
    temperature: 1,
    topP: 0.95,
    topK: 40,
    maxOutputTokens: 8192,
    responseMimeType: "application/json",
  };
  
 
   export const chatSession = model.startChat({
      generationConfig,
      history: [
        {
          role: "user",
          parts: [
            {text: "Generate Travel Plan for Location: Las Vegas, for 3 Days for Couple with a Cheap budget. Give me a Hotels options list with HotelName, Hotel address, Price, hotel image url[make sure image url work properly], geo coordinates, rating, descriptions and suggest itinerary[array] with placeName, Place Details, Place Image Url[make sure image url work properly], Geo Coordinates, ticket Pricing, rating, also opening and closeing time  Time travel each of the location for  3 days in the itinerary  day :day1 ,day2 and day3 mention   with each day plan with best time to visit in JSON format  itinerary should be in Array form not object  \n"},
          ],
        },
        {
          role: "model",
          parts: [
            {text: "Okay, here's a travel plan for a budget-friendly 3-day trip to Las Vegas for a couple, along with hotel options and a detailed itinerary in JSON format:\n\n```json\n{\n  \"location\": \"Las Vegas\",\n  \"budget\": \"Cheap\",\n  \"duration\": \"3 Days\",\n   \"travelers\": \"Couple\",\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel & Casino\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"60-100 USD per night\",\n      \"hotelImageUrl\": \"https://www.circuscircus.com/wp-content/uploads/2023/03/circus_hero_banner-3.jpg\",\n       \"geoCoordinates\": {\n        \"latitude\": 36.1368,\n        \"longitude\": -115.1629\n      },\n      \"rating\": 3.8,\n      \"description\": \"A classic Las Vegas hotel with a circus theme, offering affordable rooms and family-friendly entertainment. Great for budget travelers.\"\n    },\n     {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"70-120 USD per night\",\n      \"hotelImageUrl\": \"https://www.excalibur.com/content/dam/MGM/excalibur/hotel/exterior/excalibur-hotel-exterior-day-1400x788.jpg.rendition.1920.1080.jpg\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0983,\n        \"longitude\": -115.1739\n      },\n      \"rating\": 4.0,\n       \"description\": \"A medieval-themed hotel with budget-friendly accommodations and a variety of entertainment options, including shows and a pool.\"\n    },\n    {\n      \"hotelName\": \"Luxor Hotel and Casino\",\n       \"hotelAddress\": \"3900 S Las Vegas Blvd, Las Vegas, NV 89119\",\n       \"price\": \"75-130 USD per night\",\n       \"hotelImageUrl\": \"https://www.luxor.com/content/dam/MGM/luxor/hotel/exterior/luxor-hotel-exterior-day-1400x788.jpg.rendition.1920.1080.jpg\",\n       \"geoCoordinates\": {\n        \"latitude\": 36.0955,\n        \"longitude\": -115.1735\n      },\n      \"rating\": 4.2,\n       \"description\": \"A distinctive pyramid-shaped hotel offering themed rooms, a large casino, and several dining options. Great for an affordable and unique experience.\"\n    }\n\n  ],\n  \"itinerary\": [\n    {\n        \"day\": \"day1\",\n          \"bestTimeToVisit\": \"Morning and Afternoon\",\n      \"plan\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"A pedestrian mall in downtown Las Vegas featuring a spectacular light show on a massive screen canopy. Free street performers and people-watching.\",\n          \"placeImageUrl\": \"https://downtownlv.com/wp-content/uploads/2023/05/Fremont-Street-Experience-Las-Vegas-Night-1-scaled.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1699,\n            \"longitude\": -115.1410\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.5,\n           \"openingTime\": \"24/7 (light shows are scheduled)\",\n          \"closingTime\": \"24/7\",\n            \"travelTime\":\"30 min from center Strip\"\n        },\n        {\n          \"placeName\": \"The LINQ Promenade\",\n          \"placeDetails\": \"An outdoor shopping, dining, and entertainment district located in the heart of the Strip. Stroll around the shops and enjoy street performances.\",\n           \"placeImageUrl\": \"https://www.caesars.com/content/dam/clv/Las-Vegas/things-to-do/linq-promenade/linq-promenade-attractions-1400x788.jpg.rendition.1920.1080.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1168,\n            \"longitude\": -115.1697\n          },\n          \"ticketPricing\": \"Free (activities and dining costs vary)\",\n          \"rating\": 4.3,\n           \"openingTime\": \"10:00 AM\",\n          \"closingTime\": \"Late Night\",\n           \"travelTime\":\"15 min by Bus from Fremont Street\"\n        },\n         {\n              \"placeName\": \"Bellagio Conservatory & Botanical Gardens\",\n              \"placeDetails\": \"A beautiful indoor garden display that changes with the seasons. A peaceful and free attraction.\",\n             \"placeImageUrl\": \"https://www.bellagio.com/content/dam/MGM/bellagio/entertainment/conservatory-botanical-gardens/bellagio-conservatory-main-1400x788.jpg.rendition.1920.1080.jpg\",\n              \"geoCoordinates\": {\n                \"latitude\": 36.1127,\n                 \"longitude\": -115.1744\n              },\n             \"ticketPricing\": \"Free\",\n             \"rating\": 4.7,\n             \"openingTime\": \"24/7\",\n             \"closingTime\":\"24/7\",\n              \"travelTime\":\"10 min by walk from LINQ Promenade\"\n        }\n      ]\n    },\n    {\n       \"day\": \"day2\",\n        \"bestTimeToVisit\": \"Morning and Evening\",\n      \"plan\": [\n        {\n            \"placeName\": \"Seven Magic Mountains\",\n            \"placeDetails\": \"Colorful rock sculptures located in the desert outside of Las Vegas. Great for photos. (You need a car to get there).\",\n            \"placeImageUrl\": \"https://www.travelnevada.com/wp-content/uploads/2021/08/Seven_Magic_Mountains-Las_Vegas-Nevada_Credit_Visit_Las_Vegas_1280x853.jpg\",\n            \"geoCoordinates\": {\n                \"latitude\": 35.9650,\n                \"longitude\": -115.2458\n            },\n            \"ticketPricing\": \"Free\",\n             \"rating\": 4.4,\n            \"openingTime\":\"24/7\",\n            \"closingTime\": \"24/7\",\n              \"travelTime\":\"30 min drive from center Strip\"\n          },\n        {\n          \"placeName\": \"Welcome to Fabulous Las Vegas Sign\",\n          \"placeDetails\": \"A classic Las Vegas landmark. Take some photos and create some memories.\",\n          \"placeImageUrl\": \"https://assets.simpleviewinc.com/simpleview/image/upload/c_fill,h_675,q_75,w_1200/v1/clients/lasvegas/welcome_sign_1_17a9a755-0e12-43ae-912f-1943b06a9668.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0829,\n            \"longitude\": -115.1724\n          },\n          \"ticketPricing\": \"Free\",\n          \"rating\": 4.6,\n          \"openingTime\":\"24/7\",\n          \"closingTime\": \"24/7\",\n            \"travelTime\":\"20 min drive from Seven Magic Mountains\"\n        },\n        {\n          \"placeName\": \"The Mirage Volcano\",\n          \"placeDetails\": \"A free volcano show with fire and water effects that take place multiple times a night.\",\n          \"placeImageUrl\": \"https://www.vegas.com/wp-content/uploads/2020/12/Mirage-Volcano.jpg\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1220,\n            \"longitude\": -115.1731\n          },\n          \"ticketPricing\": \"Free\",\n           \"rating\": 4.4,\n          \"openingTime\":\"8:00 PM\",\n          \"closingTime\":\"11:00 PM (Shows Every Hour)\",\n            \"travelTime\":\"15 min drive from welcome sign\"\n        }\n\n      ]\n    },\n    {\n      \"day\": \"day3\",\n       \"bestTimeToVisit\": \"Morning and Afternoon\",\n      \"plan\": [\n           {\n          \"placeName\": \"Red Rock Canyon National Conservation Area\",\n          \"placeDetails\": \"Scenic desert landscapes with hiking trails, rock formations, and wildlife viewing. A great place to escape the city. (Requires a car, entrance fee).\",\n            \"placeImageUrl\": \"https://www.blm.gov/sites/blm.gov/files/styles/max_1300x1300/public/images/RRCanyon_ScenicLoop-2.jpg?itok=bUvKk71b\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1464,\n            \"longitude\": -115.4162\n          },\n           \"ticketPricing\": \"Entry fee around $15 per vehicle\",\n           \"rating\": 4.8,\n           \"openingTime\":\"6:00 AM\",\n          \"closingTime\":\"8:00 PM\",\n              \"travelTime\":\"30 min drive from Center Strip\"\n\n        },\n          {\n              \"placeName\":\"M&M's World Las Vegas\",\n              \"placeDetails\":\"A colorful and fun themed store with M&M's merchandise and photo ops.\",\n              \"placeImageUrl\":\"https://www.vegas.com/wp-content/uploads/2023/06/mms-world-las-vegas.jpg\",\n              \"geoCoordinates\":{\n                \"latitude\": 36.1096,\n                \"longitude\": -115.1709\n              },\n               \"ticketPricing\": \"Free (purchases cost vary)\",\n               \"rating\": 4.2,\n               \"openingTime\":\"9:00 AM\",\n              \"closingTime\":\"Midnight\",\n             \"travelTime\":\"30 min drive from Red Rock Canyon\"\n\n            },\n            {\n              \"placeName\": \"High Roller Observation Wheel\",\n              \"placeDetails\": \"Giant Observation wheel offering great views of the city (Optional , pay extra)\",\n              \"placeImageUrl\": \"https://www.caesars.com/content/dam/clv/Las-Vegas/things-to-do/high-roller/High-Roller-Exterior-night-1400x788.jpg.rendition.1920.1080.jpg\",\n              \"geoCoordinates\": {\n                \"latitude\": 36.1171,\n                \"longitude\": -115.1707\n              },\n              \"ticketPricing\": \"Starting from $30 per person\",\n               \"rating\": 4.5,\n              \"openingTime\":\"2:00 PM\",\n              \"closingTime\":\"Midnight\",\n                \"travelTime\":\"10 min walk from M&M's World\"\n\n            }\n\n      ]\n    }\n  ]\n}\n```\n**Key Notes:**\n\n*   **Budget:** This itinerary focuses on free attractions, walking, and using public transportation. Food can be made affordable by grabbing some street foods or quick eat options.\n*   **Transportation:**  Walking and buses are generally the most budget-friendly. Rent a car for the second day's optional plan, including Seven Magic Mountains and Red Rock canyon\n*   **Flexibility:** This is a suggestion, feel free to adjust it based on your interests.\n*   **Hotel Prices:** Prices may vary based on the dates and availability. Book in advance if you have a specific date planned.\n*   **Food:** Eating at fast food joints or quick bite places can help cut costs on the food budget.\n*   **Ticket Prices:** It is always a good idea to book tickets online to save time and money.\n*   **Time of Travel:**  The travel time between locations are estimated and may vary depending on traffic conditions\n\n**Important:** Always double-check opening hours and any ticket requirements beforehand, especially during special events or holidays.\n"},
          ],
        },
      ],
    });
  
  